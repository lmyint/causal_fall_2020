<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Topic 2 Exchangeability | STAT 451: Causal Inference</title>
  <meta name="description" content="This is the class website for Causal Inference at Macalester College." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Topic 2 Exchangeability | STAT 451: Causal Inference" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the class website for Causal Inference at Macalester College." />
  <meta name="github-repo" content="lmyint/causal_fall_2020" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Topic 2 Exchangeability | STAT 451: Causal Inference" />
  
  <meta name="twitter:description" content="This is the class website for Causal Inference at Macalester College." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="review-and-motivation.html"/>
<link rel="next" href="study-designs-overview.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #2a211c; color: #bdae9d; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; background-color: #2a211c; color: #bdae9d; border-right: 1px solid #bdae9d; }
td.sourceCode { padding-left: 5px; }
pre, code { color: #bdae9d; background-color: #2a211c; }
code > span.kw { color: #43a8ed; font-weight: bold; } /* Keyword */
code > span.dt { text-decoration: underline; } /* DataType */
code > span.dv { color: #44aa43; } /* DecVal */
code > span.bn { color: #44aa43; } /* BaseN */
code > span.fl { color: #44aa43; } /* Float */
code > span.ch { color: #049b0a; } /* Char */
code > span.st { color: #049b0a; } /* String */
code > span.co { color: #0066ff; font-style: italic; } /* Comment */
code > span.al { color: #ffff00; } /* Alert */
code > span.fu { color: #ff9358; font-weight: bold; } /* Function */
code > span.er { color: #ffff00; font-weight: bold; } /* Error */
code > span.wa { color: #ffff00; font-weight: bold; } /* Warning */
code > span.cn { } /* Constant */
code > span.sc { color: #049b0a; } /* SpecialChar */
code > span.vs { color: #049b0a; } /* VerbatimString */
code > span.ss { color: #049b0a; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { } /* Variable */
code > span.cf { color: #43a8ed; font-weight: bold; } /* ControlFlow */
code > span.op { } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { font-weight: bold; } /* Preprocessor */
code > span.at { } /* Attribute */
code > span.do { color: #0066ff; font-style: italic; } /* Documentation */
code > span.an { color: #0066ff; font-weight: bold; font-style: italic; } /* Annotation */
code > span.co { color: #0066ff; font-weight: bold; font-style: italic; } /* Comment */
code > span.in { color: #0066ff; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="custom_styles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href = "./">STAT 451: Causal Inference</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome!</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a><ul>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html#references-for-review"><i class="fa fa-check"></i>References for review</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html#required-references"><i class="fa fa-check"></i>Required references</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html#further-exploration"><i class="fa fa-check"></i>Further exploration</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="schedule.html"><a href="schedule.html"><i class="fa fa-check"></i>Schedule</a></li>
<li class="part"><span><b>I Foundational Ideas</b></span></li>
<li class="chapter" data-level="1" data-path="review-and-motivation.html"><a href="review-and-motivation.html"><i class="fa fa-check"></i><b>1</b> Review and Motivation</a><ul>
<li class="chapter" data-level="" data-path="review-and-motivation.html"><a href="review-and-motivation.html#learning-goals"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="review-and-motivation.html"><a href="review-and-motivation.html#exercises"><i class="fa fa-check"></i>Exercises</a><ul>
<li class="chapter" data-level="" data-path="review-and-motivation.html"><a href="review-and-motivation.html#exercise-1-plots-and-confounders"><i class="fa fa-check"></i>Exercise 1: Plots and confounders</a></li>
<li class="chapter" data-level="" data-path="review-and-motivation.html"><a href="review-and-motivation.html#exercise-2-implications-of-confounding"><i class="fa fa-check"></i>Exercise 2: Implications of confounding</a></li>
<li class="chapter" data-level="" data-path="review-and-motivation.html"><a href="review-and-motivation.html#exercise-3-logistic-regression-models"><i class="fa fa-check"></i>Exercise 3: Logistic regression models</a></li>
<li class="chapter" data-level="" data-path="review-and-motivation.html"><a href="review-and-motivation.html#exercise-4-warming-up-to-causal-ideas"><i class="fa fa-check"></i>Exercise 4: Warming up to causal ideas</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="exchangeability.html"><a href="exchangeability.html"><i class="fa fa-check"></i><b>2</b> Exchangeability</a><ul>
<li class="chapter" data-level="" data-path="exchangeability.html"><a href="exchangeability.html#pre-class-work"><i class="fa fa-check"></i>Pre-class work</a></li>
<li class="chapter" data-level="" data-path="review-and-motivation.html"><a href="review-and-motivation.html#learning-goals"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="review-and-motivation.html"><a href="review-and-motivation.html#exercises"><i class="fa fa-check"></i>Exercises</a><ul>
<li class="chapter" data-level="" data-path="exchangeability.html"><a href="exchangeability.html#exercise-1"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="exchangeability.html"><a href="exchangeability.html#exercise-2"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="exchangeability.html"><a href="exchangeability.html#exercise-3"><i class="fa fa-check"></i>Exercise 3</a></li>
<li class="chapter" data-level="" data-path="exchangeability.html"><a href="exchangeability.html#exercise-4"><i class="fa fa-check"></i>Exercise 4</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="study-designs-overview.html"><a href="study-designs-overview.html"><i class="fa fa-check"></i><b>3</b> Study Designs Overview</a><ul>
<li class="chapter" data-level="" data-path="exchangeability.html"><a href="exchangeability.html#pre-class-work"><i class="fa fa-check"></i>Pre-class work</a></li>
<li class="chapter" data-level="" data-path="review-and-motivation.html"><a href="review-and-motivation.html#learning-goals"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="review-and-motivation.html"><a href="review-and-motivation.html#exercises"><i class="fa fa-check"></i>Exercises</a><ul>
<li class="chapter" data-level="" data-path="exchangeability.html"><a href="exchangeability.html#exercise-1"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="exchangeability.html"><a href="exchangeability.html#exercise-2"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="exchangeability.html"><a href="exchangeability.html#exercise-3"><i class="fa fa-check"></i>Exercise 3</a></li>
<li class="chapter" data-level="" data-path="exchangeability.html"><a href="exchangeability.html#exercise-4"><i class="fa fa-check"></i>Exercise 4</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Homework</b></span></li>
<li class="chapter" data-level="" data-path="homework-1.html"><a href="homework-1.html"><i class="fa fa-check"></i>Homework 1</a><ul>
<li class="chapter" data-level="" data-path="exchangeability.html"><a href="exchangeability.html#exercise-1"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="exchangeability.html"><a href="exchangeability.html#exercise-2"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="exchangeability.html"><a href="exchangeability.html#exercise-3"><i class="fa fa-check"></i>Exercise 3</a></li>
<li class="chapter" data-level="" data-path="exchangeability.html"><a href="exchangeability.html#exercise-4"><i class="fa fa-check"></i>Exercise 4</a></li>
<li class="chapter" data-level="" data-path="homework-1.html"><a href="homework-1.html#exercise-5"><i class="fa fa-check"></i>Exercise 5</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">STAT 451: Causal Inference</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="exchangeability" class="section level1">
<h1><span class="header-section-number">Topic 2</span> Exchangeability</h1>
<div id="pre-class-work" class="section level2 unnumbered">
<h2>Pre-class work</h2>
<p>Videos/slides</p>
<ul>
<li>Defining Causal Effects: <a href="https://youtu.be/poSGgCFsHgU">[video]</a>, <a href="https://drive.google.com/file/d/1q8rrpDSz3TS2t_B6bNZyfOklVdOEtCXW/view?usp=sharing">[slides]</a></li>
<li>Exchangeability: <a href="https://youtu.be/WILPl5dkMMQ">[video]</a>, <a href="https://drive.google.com/file/d/1Tx3Q2khrHzbFWk4cuVFEI1AcStwVxouZ/view?usp=sharing">[slides]</a></li>
</ul>
<p>Checkpoint questions: <a href="https://moodle.macalester.edu/mod/quiz/view.php?id=24220">Link to Moodle checkpoint</a></p>
<ol class="example" style="list-style-type: decimal">
<li>Which of the following is an example of an example of an average causal effect? Select all that apply.
<ol style="list-style-type: lower-alpha">
<li><span class="math inline">\(E[Y^{a=1}]\)</span></li>
<li><span class="math inline">\(E[Y^{a=0}]\)</span></li>
<li><span class="math inline">\(E[Y^{a=1}]/E[Y^{a=0}]\)</span></li>
<li><span class="math inline">\(Y^{a=1}-Y^{a=0}\)</span></li>
<li><span class="math inline">\(E[Y^{a=1}-Y^{a=0}]\)</span></li>
</ol></li>
<li>We want to estimate the causal effect of a new medication (treatment group) on cholesterol levels as compared to the medication that is currently the standard of care (control group). (The potential outcomes represent potential cholesterol levels.) Fatty food consumption is likely a factor that would lead to lack of exchangeability of the treated and untreated if doctors use fatty food consumption in their choice of medication to prescribe. Increased fatty food consumption generally leads to higher cholesterol levels. Suppose that the new medication truly does lead to lower cholesterol levels than the standard of care. Which of the following are correct?
<ol style="list-style-type: lower-alpha">
<li>If those prescribed the new medication have HIGHER fatty food consumption than those prescribed the standard of care, then the beneficial impact of the new drug will be overestimated when directly comparing the treatment to the control group.</li>
<li>If those prescribed the new medication have HIGHER fatty food consumption than those prescribed the standard of care, then the beneficial impact of the new drug will be underestimated when directly comparing the treatment to the control group.</li>
<li>If those prescribed the new medication have LOWER fatty food consumption than those prescribed the standard of care, then the beneficial impact of the new drug will be overestimated when directly comparing the treatment to the control group.</li>
<li>If those prescribed the new medication have LOWER fatty food consumption than those prescribed the standard of care, then the beneficial impact of the new drug will be underestimated when directly comparing the treatment to the control group.</li>
</ol></li>
<li><p>Continuing the medication-cholesterol example, what are two factors (other than fatty food consumption) that could contribute to a lack of exchangeability of the treatment groups? Explain your reasoning.</p></li>
<li>Conditional exchangeability is marginal exchangeability within subsets of the data.
<ol style="list-style-type: lower-alpha">
<li>TRUE</li>
<li>FALSE</li>
</ol></li>
<li>Suppose that marginal exchangeability of the treated and untreated holds. Among the treated, we observe a mean outcome of 10. Among the untreated, we observe a mean outcome of 8. What can be said about <span class="math inline">\(Y^{a=0}\)</span> among the treated and about <span class="math inline">\(Y^{a=1}\)</span> among the untreated?
<ol style="list-style-type: lower-alpha">
<li>We don't know anything about those quantities because they are unobserved.</li>
<li>Among the treated, the mean <span class="math inline">\(Y^{a=0}\)</span> is 10. Among the untreated, the mean <span class="math inline">\(Y^{a=1}\)</span> is 8.</li>
<li>Among the treated, the mean <span class="math inline">\(Y^{a=0}\)</span> is 8. Among the untreated, the mean <span class="math inline">\(Y^{a=1}\)</span> is 10.</li>
</ol></li>
</ol>
<p><br><br><br><br></p>
</div>
<div id="learning-goals" class="section level2 unnumbered">
<h2>Learning Goals</h2>
<ul>
<li>Define an <strong>average causal effect</strong> in terms of potential outcomes</li>
<li>Apply the concepts of marginal and conditional exchangeability to answer questions about (hypothetical) data on potential outcomes.</li>
<li>Give examples of when marginal and conditional exchangeability would and would not hold in various data contexts.</li>
<li>Explain why a direct comparison of the outcomes in the treated and untreated is misleading as an estimate of a causal effect.</li>
</ul>
<p><br><br><br><br></p>
</div>
<div id="exercises" class="section level2 unnumbered">
<h2>Exercises</h2>
<div id="exercise-1" class="section level3 unnumbered">
<h3>Exercise 1</h3>
<p>Suppose that we are trying to understand the causal effect of a personal finance course on the percent of earnings left in savings each month (abbreviated as &quot;percent savings&quot;). For the 500 people who took the course, we are able to collect data on percent savings and various other factors. We are also able to collect the same information from 500 people who did not take the course.</p>
<ol style="list-style-type: lower-alpha">
<li><p>Do you think that a comparison of percent savings in the course takers and non-takers would be a valid estimate of the average causal effect? Explain your viewpoint using the concepts of potential outcomes and exchangeability.</p></li>
<li><p>One important factor to consider is the number of children that an individual has. Explain how this factor could contribute to a lack of exchangeability in the outcomes of the course takers and non-takers. As part of your explanation, complete the following figure showing the distributions of potential outcomes in different settings. State any assumptions that you make.</p></li>
</ol>
<p><img src="causal_manual_files/figure-html/02-ex1-1.png" width="1440" /></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Do you think conditional exchangeability holds conditional on number of children?
<ul>
<li>If yes, why?</li>
<li>If no, what other factors might be needed to achieve conditional exchangeability? What is your thought process in thinking about other factors?</li>
</ul></li>
</ol>
<p><br><br></p>
</div>
<div id="exercise-2" class="section level3 unnumbered">
<h3>Exercise 2</h3>
<p>We have the data below on number of children (<span class="math inline">\(Z\)</span>), treatment (course takers: <span class="math inline">\(A = 1\)</span>. course non-takers: <span class="math inline">\(A = 0\)</span>), and the percent savings outcome (<span class="math inline">\(Y^a\)</span>) categorized as either high (H) or low (L).</p>
<p>Assuming that the course takers and non-takers are exchangeable conditional on number of children, fill in data on the missing potential outcomes.</p>
<table>
<thead>
<tr class="header">
<th align="center"><span class="math inline">\(n\)</span></th>
<th align="center"><span class="math inline">\(Z\)</span></th>
<th align="center"><span class="math inline">\(A\)</span></th>
<th align="center"><span class="math inline">\(Y^{a=1}\)</span></th>
<th align="center"><span class="math inline">\(Y^{a=0}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">10</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">7 H, 3 L</td>
<td align="center">?</td>
</tr>
<tr class="even">
<td align="center">30</td>
<td align="center">2</td>
<td align="center">0</td>
<td align="center">?</td>
<td align="center">18 H, 12 L</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">6 H, 4 L</td>
<td align="center">?</td>
</tr>
<tr class="even">
<td align="center">40</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">?</td>
<td align="center">20 H, 20 L</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">5 H, 5 L</td>
<td align="center">?</td>
</tr>
<tr class="even">
<td align="center">50</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">?</td>
<td align="center">20 H, 30 L</td>
</tr>
</tbody>
</table>
<p><br><br></p>
</div>
<div id="exercise-3" class="section level3 unnumbered">
<h3>Exercise 3</h3>
<p>While <span class="math inline">\(Y^a\)</span> denotes the potential outcome under treatment <span class="math inline">\(A = a\)</span>, <span class="math inline">\(Y\)</span> denotes the observed outcome. (For the treated, <span class="math inline">\(Y = Y^{a=1}\)</span>. For the untreated, <span class="math inline">\(Y = Y^{a=0}\)</span>.)</p>
<p>Is it possible for marginal exchangeability to hold but for <span class="math inline">\(Y\)</span> and <span class="math inline">\(A\)</span> to be dependent? Explain using a numerical or graphical example.</p>
<p><br><br></p>
</div>
<div id="exercise-4" class="section level3 unnumbered">
<h3>Exercise 4</h3>
<p>Assuming that we have exchangeability of the course takers and non-takers conditional on number of children (<span class="math inline">\(Z\)</span>) and use of public transportation (<span class="math inline">\(W\)</span>), how might a regression model be used to estimate the average causal effect of the personal finance course?</p>
<!-- Maybe remove this one and replace with: Show that marginal exchangeability doesn't hold but conditional exchangeability does. -->

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="review-and-motivation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="study-designs-overview.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
